## 스토리지 개념

### 1. 블록 스토리지

컴퓨터가 한대가 있다. 그 컴퓨터의 하드 디스크 크기는 500MB이다. 용량이 작아서1GB짜리 새로운 하드디스크를 달았다. 바탕화면에서 내컴퓨터를 더블클릭하면 운영체제가 설치된 500MB 하드디스크와 1GB 새 로컬 하드 디스크가 표시된다.  

여기서 이 컴퓨터가 실제 컴퓨터가 아니라 클라우드 컴퓨트 서비스에서 할당받은 인스턴스라고 생각해보자. 

인스턴스도 물리 컴퓨터와 마찬가지로 하드디스크를 추가 할 수 있다. 다만 용어만 다르다. 

클라우드컴퓨팅에서 컴퓨터나 서버를 인스턴스라고 하는 것 처럼 인스턴스에 추가하는 하드 디스크를 블록 스토리지라고 한다. 

블록 스토리지는 운영체제가 설치된 인스턴스에 추가로 확장해 사용할 수 있는 디스크로, 데이터난 파일등을 보관하려는 목적의 저장공간이다. 

그래서 컴퓨터의 로컬 하드 디스크를 본체에서 분리해 다른 컴퓨터에 연결해서 사용할 수 있는 것 처럼, 인스턴스의 블록 스토리지도 원래 있던 인스턴스에서 연결 해제 한 후 다른 인스턴스에 연결하여 사용 할 수 있다. 

![Screenshot from 2020-12-16 15-37-51](/home/sominmoon/Pictures/Screenshot from 2020-12-16 15-37-51.png)

예를 들어 개발 서버 하나를 인스턴스로 할당받았다고 가정해보자. 

할당받은 인스턴스에 톰캣과 아파치 웹서버를 개발 한경으로 설정하고, 개발 소스와 관련된 문서도 올렸다. 그런데 갑자기 사용하던 인스턴스에 문제가 생겨 기존 인스턴스는 삭제하고 새로운 인스턴스를 다시 할당 받아야하는 상황이 발생할때, 이때는 블록 스토리지를 사용해야한다. 개발소스나 문서처럼 중요한 데이터들은 운영체제와 함께 생명을 다하는 인스턴스가 아니라 별도의 저장공간인 블록스토리지에 저장한다. 그러면 인스턴스에 문제가 생겼을 대 연결을 해제한 후 새로운 인스턴스에 다시 연결해서 사용할 수 있다. 



### 2. 오브젝트 스토리지 

오브젝트 스토리지는 블록 스토리지와 다르게 단독으로 구성할 수 있으며, 사용자 계정의 컨테이너에 파일이나 데이터를 저장할 수 있는 저장 공간이다.

사용자별로 저장 공간을 나누는 스토리지 시스템을 구축할 때는 오브젝트 스토리지를 사용해야 한다. 오브젝트 스토리지는 사용자 계정이 있으며, 사용자는 시스템에 로그인해야 스토리지를 사용할 수 있다. 파일을 저장할 수 있는 컨테이너를 생성하거나 삭제할 수 있고, 해당 컨테이너에 데이터나 음악, 동영상, 문서 파일을 올리고 내려받을 수 있습니다. 또 데이터가 필요 없을 때는 삭제도 가능하다.

일반적으로 클라우드 서비스로 알고 있는 다음 클라우드나 네이버의 N 드라이브, Dropbox 같은 스토리지 서비스는 오브젝트 스토리지 서비스라고 할 수 있다.



### 3. 대표적인 스토리지 서비스

#### 1. AWS:  EBS, S3

1. EBS (elastic block store) 는 블록 스토리지에 해당하는 서비스로 아마존의 ec2에서 생성한 인스턴스에 확장해서 사용할 수 있는 스토리지(하드디스크..)라고 생각하면된다. 1GB~ 1TB  확장가능.
2. S3 는 오브젝트 스토리지에 해당하는 서비스로 사용자 계정에 해당하는 owner,  컨테이너에 해당하는 bucket, 파일이나 데이터에 해당하는 오브젝트로 구성되어있다. 

#### 2. Openstack : Cinder, Swift

![Screenshot from 2020-12-16 16-04-44](/home/sominmoon/Pictures/Screenshot from 2020-12-16 16-04-44.png)

오픈스택은 에섹스(Essex) 버전까지 nova-volume이라는 이름으로 블록 스토리지 서비스를 제공했으나, 폴섬 버전부터는 블록 스토리지 서비스가 Cinder라는 별도의 프로젝트로 독립되었습니다. Cinder는 cinder-volume, cinder-backup, cinder-scheduler, Volume Provider, cinder-api로 구성되며, Nova에서 제공하는 인스턴스의 확장 스토리지로 사용할 수 있습니다.

Swift는 오픈스택의 기본 서비스 중 하나로 오브젝트 스토리지 서비스를 제공합니다. Swift는 proxy-server, account-server, container-server, object-server, swift-api로 구성되었고, 이 중 proxy-server는 여러 대의 스토리지 노드에 구성된 account-server, container-server, object-server를 관리합니다.